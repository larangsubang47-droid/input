<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#00897b">
  <title>Laporan Kualitas Air - Jasa Tirta Luhur</title>
  
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- NOTIFICATION -->
  <div id="notification" class="notification"></div>

  <!-- LOGIN SCREEN -->
  <div id="loginScreen" class="login-container">
    <div class="login-card">
      <div class="logo">ğŸ’§</div>
      <h1 class="login-title">Jasa Tirta Luhur</h1>
      <p class="login-subtitle">Laporan Kualitas Air Baku & Air Bersih</p>
      <div class="form-group">
        <label>Username</label>
        <input type="text" id="loginUsername" placeholder="Masukkan username" autocomplete="username">
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="loginPassword" placeholder="Masukkan password" autocomplete="current-password">
      </div>
      <button class="btn btn-primary" onclick="login()">ğŸ” Login</button>
      <button id="installBtn" class="btn btn-install" onclick="installPWA()" style="display:none;">ğŸ“± Install Aplikasi</button>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="mainApp" class="hidden">
    <!-- HEADER -->
    <div class="header">
      <h1>ğŸ’§ Laporan Kualitas Air</h1>
      <div class="user-info">
        <span id="userDisplay"></span>
        <button onclick="logout()" class="btn-logout">Logout</button>
      </div>
    </div>

    <!-- FORM INPUT -->
    <div id="formScreen" class="container">
      <div class="card">
        <h2 class="section-title">ğŸ“‹ Form Laporan Kualitas</h2>
        
        <!-- DRAFT INDICATOR -->
        <div style="margin-bottom: 15px;">
          <span id="draftIndicator" style="display:none; background:#ff9800; color:white; padding:8px 12px; border-radius:6px; font-size:13px; font-weight:bold;">
            ğŸ“ Draft tersedia
          </span>
        </div>
        
        <!-- HEADER INFO -->
        <div class="form-section">
          <h3>â„¹ï¸ Informasi Laporan</h3>
          <div class="form-row">
            <div class="form-group">
              <label>Hari <span style="color:red;">*</span></label>
              <input type="text" id="hari" placeholder="Contoh: Senin" required>
            </div>
            <div class="form-group">
              <label>Tanggal <span style="color:red;">*</span></label>
              <input type="date" id="tanggal" required onchange="onDateChange()">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Operator/Petugas <span style="color:red;">*</span></label>
              <input type="text" id="operator" placeholder="Nama petugas laboratorium" required>
            </div>
            <div class="form-group">
              <label>Shift <span style="color:red;">*</span></label>
              <select id="shift" required>
                <option value="">-- Pilih Shift --</option>
                <option value="Shift 1">Shift 1</option>
                <option value="Shift 2">Shift 2</option>
              </select>
            </div>
          </div>
        </div>

        <!-- FREKUENSI PENGAMBILAN -->
        <div class="form-section">
          <h3>â° Frekuensi Pemeriksaan <span style="color:red;">*</span></h3>
          <p style="font-size: 13px; color: #666; margin-bottom: 12px;">Pilih jam pemeriksaan (centang jam yang diperlukan)</p>
          <div class="time-slots">
            <label><input type="checkbox" class="time-check" value="08:00" checked> 08:00</label>
            <label><input type="checkbox" class="time-check" value="09:00" checked> 09:00</label>
            <label><input type="checkbox" class="time-check" value="10:00" checked> 10:00</label>
            <label><input type="checkbox" class="time-check" value="11:00" checked> 11:00</label>
            <label><input type="checkbox" class="time-check" value="12:00" checked> 12:00</label>
            <label><input type="checkbox" class="time-check" value="13:00" checked> 13:00</label>
            <label><input type="checkbox" class="time-check" value="14:00" checked> 14:00</label>
            <label><input type="checkbox" class="time-check" value="15:00" checked> 15:00</label>
            <label><input type="checkbox" class="time-check" value="16:00" checked> 16:00</label>
            <label><input type="checkbox" class="time-check" value="17:00" checked> 17:00</label>
            <label><input type="checkbox" class="time-check" value="18:00" checked> 18:00</label>
            <label><input type="checkbox" class="time-check" value="19:00" checked> 19:00</label>
            <label><input type="checkbox" class="time-check" value="20:00" checked> 20:00</label>
            <label><input type="checkbox" class="time-check" value="21:00" checked> 21:00</label>
            <label><input type="checkbox" class="time-check" value="22:00" checked> 22:00</label>
            <label><input type="checkbox" class="time-check" value="23:00" checked> 23:00</label>
            <label><input type="checkbox" class="time-check" value="00:00" checked> 00:00</label>
            <label><input type="checkbox" class="time-check" value="01:00" checked> 01:00</label>
            <label><input type="checkbox" class="time-check" value="02:00" checked> 02:00</label>
            <label><input type="checkbox" class="time-check" value="03:00" checked> 03:00</label>
            <label><input type="checkbox" class="time-check" value="04:00" checked> 04:00</label>
            <label><input type="checkbox" class="time-check" value="05:00" checked> 05:00</label>
            <label><input type="checkbox" class="time-check" value="06:00" checked> 06:00</label>
            <label><input type="checkbox" class="time-check" value="07:00" checked> 07:00</label>
          </div>
        </div>

        <!-- PARAMETER KEKERUHAN -->
        <div class="form-section">
          <h3>ğŸ”¬ Kekeruhan</h3>
          <div class="data-table" id="KekeruhanTable"></div>
        </div>

        <!-- PARAMETER pH -->
        <div class="form-section">
          <h3>ğŸ”¬ pH</h3>
          <div class="data-table" id="pHTable"></div>
        </div>

        <!-- PARAMETER TEMPERATUR -->
        <div class="form-section">
          <h3>ğŸ”¬ Temperatur</h3>
          <div class="data-table" id="TemperaturTable"></div>
        </div>

        <!-- PARAMETER WARNA -->
        <div class="form-section">
          <h3>ğŸ”¬ Warna</h3>
          <div class="data-table" id="WarnaTable"></div>
        </div>

        <!-- PARAMETER DHL -->
        <div class="form-section">
          <h3>ğŸ”¬ DHL</h3>
          <div class="data-table" id="DHLTable"></div>
        </div>

        <!-- PARAMETER AMMONIUM -->
        <div class="form-section">
          <h3>ğŸ”¬ Ammonium</h3>
          <div class="data-table" id="AmmoniumTable"></div>
        </div>

        <!-- PARAMETER MANGAN -->
        <div class="form-section">
          <h3>ğŸ”¬ Mangan</h3>
          <div class="data-table" id="ManganTable"></div>
        </div>

        <!-- PARAMETER DETERGEN -->
        <div class="form-section">
          <h3>ğŸ”¬ Detergen</h3>
          <div class="data-table" id="DetergenTable"></div>
        </div>

        <!-- PARAMETER DO -->
        <div class="form-section">
          <h3>ğŸ”¬ DO (Dissolved Oxygen)</h3>
          <div class="data-table" id="DOTable"></div>
        </div>

        <!-- PARAMETER BESI -->
        <div class="form-section">
          <h3>ğŸ”¬ Besi</h3>
          <div class="data-table" id="BesiTable"></div>
        </div>

        <!-- PARAMETER ALUMUNIUM -->
        <div class="form-section">
          <h3>ğŸ”¬ Alumunium</h3>
          <div class="data-table" id="AlumuniumTable"></div>
        </div>

        <!-- PARAMETER FREE CHLORINE -->
        <div class="form-section">
          <h3>ğŸ”¬ Free Chlorine</h3>
          <div class="data-table" id="Free ChlorineTable"></div>
        </div>

        <!-- PARAMETER TOTAL CHLORINE -->
        <div class="form-section">
          <h3>ğŸ”¬ Total Chlorine</h3>
          <div class="data-table" id="Total ChlorineTable"></div>
        </div>

        <!-- CATATAN -->
        <div class="form-section">
          <h3>ğŸ“ Catatan Tambahan</h3>
          <div class="form-group">
            <label>Catatan (opsional)</label>
            <textarea id="catatan" rows="3" placeholder="Catatan atau keterangan tambahan..."></textarea>
          </div>
        </div>

        <!-- BUTTONS -->
        <div class="form-actions">
          <button class="btn btn-warning" onclick="saveDraft()" id="saveDraftBtn">
            ğŸ’¾ Simpan Draft
          </button>
          
          <button class="btn btn-success" onclick="saveDataFinal()" id="saveFinalBtn">
            ğŸ“¤ Kirim ke Google Drive
          </button>
          
          <button class="btn btn-danger" onclick="deleteDraft()">
            ğŸ—‘ï¸ Hapus Draft
          </button>
          
          <button class="btn btn-secondary" onclick="clearForm()">
            ğŸ”„ Reset Form
          </button>
        </div>
      </div>
    </div>

    <!-- HISTORY SCREEN -->
    <div id="historyScreen" class="container hidden">
      <div class="card">
        <h2 class="section-title">ğŸ“œ Riwayat Laporan</h2>
        <button class="btn btn-primary" onclick="loadHistory()" style="margin-bottom:20px;">
          ğŸ”„ Refresh Data
        </button>
        <div id="historyList"></div>
      </div>
    </div>

    <!-- BOTTOM NAVIGATION -->
    <div class="bottom-nav">
      <button class="nav-item active" onclick="switchScreen('form')">
        <div class="nav-icon">â•</div>
        <div class="nav-label">Input Data</div>
      </button>
      <button class="nav-item" onclick="switchScreen('history')">
        <div class="nav-icon">ğŸ“œ</div>
        <div class="nav-label">Riwayat</div>
      </button>
    </div>
  </div>

  <script src="app.js"></script>

</body>
</html>
